# Ｍｙチャット履歴：AIチャットアシスタント

## 概要
「Ｍｙチャット履歴」は、Google Gemini APIを利用したローカル実行型のAIチャットアシスタントです。AIとの会話を記録し、その会話から自動で要約を生成して履歴として管理できます。さらに、会話の削除、編集、音声での再生、そしてPDF形式でのエクスポート機能も備えています。すべてのデータはブラウザのローカルストレージに保存されるため、プライバシーを気にすることなく利用できます。

## 主な機能
- **AIチャット機能**:
    - Gemini AIとのリアルタイム対話。
    - テキスト入力、画像添付、音声入力（Web Speech API利用）に対応。
    - 送信済みメッセージの選択、削除、編集機能。
    - **選択したメッセージの音声再生**機能（テキスト読み上げ/TTS）。
    - **再生中の音声を停止**する機能。
- **履歴管理機能**:
    - 会話の自動保存。
    - AIによる会話のタイトルと概要自動生成（要約プロンプト設定可能）。
    - マークダウン形式でのチャット履歴ダウンロード。
    - 履歴一覧からの過去チャットの検索、並べ替え、読み込み、削除。
    - 全チャット履歴のJSON形式でのエクスポート/インポート機能。
- **カスタマイズ機能**:
    - AIの性格（システムプロンプト）設定。
    - あなたとAIの表示名設定。
    - AI応答時の通知サウンドの種類設定。
    - **AI応答の音声読み上げ（TTS）のON/OFFおよび音声の種類選択**。
    - 各種設定のCSVエクスポート/インポート機能。
- **ユーティリティ**:
    - 現在の日時表示。
    - チャット内容のPDFプレビューおよびダウンロード。
    - アプリケーション内蔵の取扱説明書。

## 技術スタック
- **HTML5**: アプリケーションの構造。
- **CSS3**: スタイリングとレスポンシブデザイン。
- **JavaScript (ES6+)**: コアロジック、Gemini API連携、Web Speech API連携、LocalStorage管理。
- **Google Gemini API**: AIとの対話エンジン。
- **html2pdf.js**: HTMLコンテンツをPDFに変換するライブラリ。

## セットアップ方法
このアプリケーションはサーバーサイドのセットアップが不要で、ローカルで完結します。
1.  `index.html` ファイルをダウンロードします。
2.  ダウンロードした `index.html` ファイルを任意のウェブブラウザ（Google Chrome, Firefox, Microsoft Edgeなど）で開きます。

## 利用方法

### 1. APIキーの設定（初回必須）
AIとチャットするためには、Google Gemini APIキーが必要です。
1.  ヘッダー右上の「**API設定**」ボタンをクリックします。
2.  表示されるモーダルに、ご自身で取得したGemini APIキーを入力します。
3.  「**APIキーをテスト**」ボタンでAPIキーの有効性を確認できます。
4.  「**保存**」ボタンをクリックして設定を保存します。

### 2. チャットを開始する
APIキーが設定されていれば、すぐにチャットを開始できます。
-   下部のテキスト入力欄にメッセージを入力し、右隣の「✈️」（送信）ボタンをクリックするか、`Enter`キーを押して送信します。（`Shift + Enter`で改行できます。）
-   「📎」（クリップ）ボタンで画像を添付したり、入力欄に直接画像をペーストすることもできます。
-   「🎤」（マイク）ボタンで音声入力も可能です。
-   入力欄上部の絵文字ボタンから手軽に絵文字を入力できます。

### 3. メッセージの選択・操作
-   チャットボックス内の任意のメッセージをクリックすると、そのメッセージが選択状態になります。
-   メッセージが選択されると、ヘッダーに以下のボタンが表示されます:
    -   **選択を削除**: 選択したメッセージをチャット履歴から削除します。
    -   **選択を編集**: 1つのメッセージが選択されている場合、その内容を編集できます。
    -   **選択を再生**: 選択した複数のメッセージ（または単一のメッセージ）のテキストコンテンツを音声で読み上げます。
    -   **音声停止**: 音声再生中にこのボタンをクリックすると、現在の読み上げを停止します。

### 4. その他の機能
詳細な機能やカスタマイズ方法については、ヘッダー右上の「**取扱説明書**」ボタンをクリックして、アプリケーション内の取扱説明書をご参照ください。

## 注意事項
-   APIキー、会話履歴、チャット履歴、各種設定は**すべてお使いのブラウザのローカルストレージに保存されます**。サーバーには一切データは送信・保存されません。
-   ブラウザのキャッシュや履歴を消去すると、保存したデータがすべて失われる可能性がありますのでご注意ください。
-   Gemini APIの利用料金は、APIキーを発行したご自身のGoogleアカウントに準じます。利用量にご注意ください。
-   音声認識および音声読み上げ機能（Web Speech API）は、ブラウザやOSの環境によって利用できる音声の種類や機能の安定性が異なります。

## ライセンス
このプロジェクトはMITライセンスの下で公開されています。詳細については、[LICENSE](LICENSE)ファイルをご参照ください。